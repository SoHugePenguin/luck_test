<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>幸运儿</title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			li {
				list-style: none;
				color: white;
				font-size: 28px;
				position: absolute;
				transition: all 1000ms linear; 
			}
			body {
				background-color: black;
			}
			
		</style>
	</head>
	<body onkeypress="start()">
		<ul id="name_list">
			
		</ul>
		<script type="text/javascript">
			//抽奖人数
			var luck_num = 1;
			//总名单
			//var name_list = ["陈豪","陈浩斌","陈泓扬","陈霁涵","陈均","陈鹏谦","陈炜","陈希隆","高彬彬","高佳翔","高骏","何力可","胡佳辉","蒋艳","金鑫","李康帅","李子杭","陆畅","罗豪达","吕心厅","苗佳乐","钱靖翰","沈阳","王书磊","王小琴","王亚飞","王一鸿","王银涛","吴宝鹏","徐勤伟","许扬","杨衍铤","叶帅帅","应佳成","余存宇","张鑫怡","周萌","朱奥星"];
			//var name_list = ["白永泽","蔡豪谊","曾培毅","陈铭","陈泰历","陈文胜","池威","范依宁","高盈盈","龚杰","郭荣隆","何植康","胡谢派","黄家鹏","黄晓峰","李斌","李昊","李思慧","李植浩","林德志","林梦彬","潘加特","瞿嘉瑞","王发越","王国鹏","王锦楠","魏为豪","吴元浩","夏晨晨","徐昊","薛柠柠","叶文章","张城钝","张淑铭","张子扬","章琪","赵佳奇","郑伟"];
			var name_list = ["鲍釔丞",
"蔡涵睿",
"曾禛",
"陈斌一",
"陈家慧",
"陈立彬",
"陈柳君",
"程琳翔",
"龚申琪",
"龚骁恺",
"郭阳光",
"何潘树",
"姜堤基",
"姜雨欣",
'蒋家乐',
'金建伟',
'李嘉涛',
'李勇呈',
'林嘉乐',
'林子为',
'刘亚琦',
'罗淳',
'马祥',
'毛加贤',
'钱凯',
'阮宝海',
'石乐豪',
'陶佳聪',
'王斌莹',
'王丽',
'王涛',
'温从康',
'吴康瑜',
'夏伟毅',
'徐欣婷',
'许雅娜',
'叶高康',
'叶礼赫',
'赵柏胜',
'赵奕翔'
];
			var width = document.documentElement.clientWidth;
			var height = document.documentElement.clientHeight;
			var html = "";
			for(var i = 0;i<name_list.length;i++){
				html += "<li id='item_"+i+"'>"+name_list[i]+"</li>"
			}
			var ul = document.getElementById("name_list");
			ul.innerHTML = html;
			var lis = document.getElementsByTagName("li");
			for(var j=0;j<lis.length;j++){
				var top_px = Math.floor(Math.random()*(height-50));
				var left = Math.floor(Math.random()*(width-100));
				var li = lis[j];
				li.style.top = top_px + "px";
				li.style.left = left +"px";
			}
			
			var state_top = setInterval(function(){
				for (var k=0;k<lis.length;k++){
					var li = lis[k];
					var old_top = li.style.top;
					var change_px = Math.floor(Math.random()*20);
					if(Math.random()<0.5){
						change_px = -change_px;
					}
					var top_h = parseInt(old_top)+change_px;
					if(top_h>(height-50)){
						top_h = (height-50);
					}else if(top_h<0) {
						top_h = 0;
					}
					li.style.top = top_h + "px";
					li.style.opacity = Math.random();
				}
			},1000);
			var state_left = setInterval(function(){
				for (var h=0;h<lis.length;h++){
					var li = lis[h];
					var old_left = li.style.left;
					var change_px = Math.floor(Math.random()*20);
					if(Math.random()<0.5){
						change_px = -change_px;
					}
					var left_w = parseInt(old_left)+change_px;
					if(left_w>(width-50)){
						left_w = (width-50);
					}else if(left_w<0){
						left_w = 0;
					}
					li.style.left = left_w +"px";
				}
			},1000);
			var state_move;
			var state = false;
			function start(){
				var key = event.keyCode;
				if(key==13){
					if(!state){
						state = true;
						clearInterval(state_top);
						clearInterval(state_left);
						state_move = setInterval(function(){
							for (var j=0;j<lis.length;j++){
								var top_px = Math.floor(Math.random()*(height-50));
								var left = Math.floor(Math.random()*(width-50));
								var li = lis[j];
								li.style.transition = "transition: all 300ms linear;";
								li.style.fontSize = "28px";
								li.style.top = top_px + "px";
								li.style.left = left +"px";
								li.style.opacity = Math.random();
							}
						},300);
					}else{
						state = false;
						clearInterval(state_move);
						var names = [];
						var num = [];
						var m = 0;
						var flag = false;
						while(true){
							var index = Math.floor(Math.random()*name_list.length);
							for(var z=0;z<num.length;z++){
								if(num[z]==index){
									flag = true;
									break;
								}else{
									flag = false;
								}
							}
							if(flag){
								continue;
							}
							num[m] = index;
							names[m] = name_list[index];
							m++;
							if(names.length==luck_num){//控制一次抽取人数
								break;
							}
						}
						var newTop = "200px";
						var newLeft = 0;
						var fontSize = "48px";
						for(var k =0 ;k < names.length ;k++){
							for(var e = 0;e < lis.length;e++){
								var name_dom = lis[e];
								if(name_dom.innerHTML==names[k]){
									name_dom.style.transition = "transition: all 3000ms linear;";
									name_dom.style.top = newTop;
									name_dom.style.fontSize = fontSize;
									name_dom.style.opacity = 1;
									if(k==0){
										newLeft += (width-(150*names.length))/(names.length+1);
										
									}else{
										newLeft += ((width-(150*names.length))/(names.length+1))+150;
									}
									//console.log(name_dom.innerHTML+":"+newLeft)
									name_dom.style.left = newLeft+"px";
								}
								var f = true;
								for(var h =0 ;h < names.length ;h++){
									if(name_dom.innerHTML == names[h]){
										f = false;
									}
								}
								if(f){
									name_dom.style.opacity = 0.2;	
								}
								
							}
						}
					}
				}
			}
		</script>
	</body>
</html>
